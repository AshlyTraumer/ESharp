@model List<ESharp.Models.AdminView>
@{
    ViewBag.Title = "title";
    Layout = "_Layout";
    var i = 0;
    var j = 0;
    var k = 0;
}
<script>
    $(function () {
        $("#accordion").accordion({ autoHeight: true });
    });
</script>
<div id="subheader">
    <div id="menu" style="position: absolute; margin-left: 25%; margin-top: 1%">
        <a href="#" id="pathBtn">Some Path</a>
        <a href="#" id="loginBtn" style="right: 0px">Вход</a>
    </div>
</div>
<table style="position: absolute; top: 25%">
    <tr>
        <td width="75%">
            <div id="left_content" style="opacity:1">
            </div>
        </td>
        <td valign="top">
            <div class="right_content" id="accordion" style="margin-top: -5px; left: 20px;">
                @foreach (var item in Model)
                {
                    if (item.CurrentPage == i)
                    {
                        <h4 style="z-index: 100000; background-color: #0a0429; border: none; color: white">
                            <a href="@Url.Action("Index", "Admin", new {page = i++})" id="customActive">@item.Chapter</a>
                        </h4>
                    }
                    else
                    {
                        <h4 style="z-index: 100000; background-color: #0a0429; border: none; color: white">
                            <a href="@Url.Action("Index", "Admin", new {page = i++})">@item.Chapter</a>
                        </h4>
                    }
                    <div style="padding: 0px">
                        @foreach (var art in item.Articles)
                        {
                            <a href="@Url.Action("Index", "Admin", new {page = i++})" style="padding-left: 20px">@art</a><br>
                        }
                    </div>
                }
               

            </div>
        </td>
    </tr>
</table>
<div id="register" hidden title="Регистрация админа" style="z-index: 100">
    <form method="post" enctype="multipart/form-data" action="@Url.Action("ChangeChapter","Admin")">
        <div class="form-inline">
            <label class="control-label">Введите имя:</label>
            <input type="text" id="chapterEdit" name="Chapter" style="width:74%; margin-left: 30px" class="form-control" required="required" minlength="2" maxlength="30">
        </div>
        <div class="form-inline" style="padding-top: 20px">
            <label class="control-label">Введите пароль:</label>
            <input type="password" id="chapterEdit2" name="Chapter" style="width:70%; margin-left: 30px" class="form-control" required="required" minlength="2" maxlength="30">
        </div>
        <div class="form-inline" style="padding-top: 20px">
            <label class="control-label">Повторите пароль:</label>
            <input type="password" id="chapterEdit3" name="Chapter" style="width:67%; margin-left: 30px" class="form-control" required="required" minlength="2" maxlength="30">
        </div>
        <div class="form-inline" style="padding-top: 20px">
            <button type="submit" class="btn btn-primary pull-right" id="change">Зарегистировать</button>
        </div>
    </form>
</div>
<div id="login" hidden title="Вход в систему" style="z-index: 100">
    <form method="post" enctype="multipart/form-data" action="@Url.Action("ChangeChapter","Admin")">
        <div class="form-inline">
            <label class="control-label">Введите имя:</label>
            <input type="text" id="chapterEdit" name="Chapter" style="width:74%; margin-left: 30px" class="form-control" required="required" minlength="2" maxlength="30">
        </div>
        <div class="form-inline" style="padding-top: 20px">
            <label class="control-label">Введите пароль:</label>
            <input type="password" id="chapterEdit2" name="Chapter" style="width:70%; margin-left: 30px" class="form-control" required="required" minlength="2" maxlength="30">
        </div>
        <div class="form-inline" style="padding-top: 20px">
            <button type="submit" class="btn btn-primary pull-right" id="change">Войти</button>
        </div>
    </form>
</div>
<script>

    $(document).ready(function () {
        $.ajax({
            type: "POST",
            url: '@Url.Action("GetArticlePartial", "Admin")',
            contentType: false,
            processData: false,
            data: { chapter: 1, article: 1 },
            success: function (data) {
                // if (data.indexOf("<form method=") != -1) {
                    $('#left_content').html(data);
                
            },
            error: function () {
                alert("There was error uploading files!");
            }
        });

        $('#register').dialog({
            autoOpen: false,
            width: 600,
            height: 300,
            show: {
                effect: "blind",
                duration: 1000
            },
            hide: {
                effect: "blind",
                duration: 1000
            }
        });

        $("#registerBtn").click(function () {

            $("#register").dialog('open');
        });

        $('#login').dialog({
            autoOpen: false,
            width: 600,
            height: 200,
            show: {
                effect: "blind",
                duration: 1000
            },
            hide: {
                effect: "blind",
                duration: 1000
            }
        });

        $("#loginBtn").click(function () {

            $("#login").dialog('open');
        });
    });

</script>